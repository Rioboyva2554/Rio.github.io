"use strict";(globalThis["webpackChunkadmin_panel_vue_webclient"]=globalThis["webpackChunkadmin_panel_vue_webclient"]||[]).push([[790],{50790:(e,t,s)=>{s.r(t),s.d(t,{default:()=>P});var l=s(59835),i=s(86970);const o={class:"q-pa-lg",style:{"min-width":"811px"}},a={class:"row q-mb-md"},n={class:"col text-h5"},g={class:"row q-mb-md"},L={class:"row q-mb-md"},r={class:"col-1 q-my-sm"},E={class:"col-2 q-ml-xl"},m={class:"row q-mb-md"},d={class:"q-ml-md"},c={class:"q-ml-md"},u={class:"row q-mb-md"},h={class:"row"},v={class:"q-ml-md"},p={class:"q-ml-md"},_={key:0,class:"row q-mt-md q-mb-sm"},S={class:"col-10"},N=["onClick"],I={key:1,class:"row"},T={class:"q-ml-md"},G={class:"q-pt-md text-right"};function O(e,t,s,O,b,w){const W=(0,l.up)("q-checkbox"),R=(0,l.up)("q-select"),C=(0,l.up)("q-btn"),B=(0,l.up)("q-item-label"),y=(0,l.up)("q-tooltip"),V=(0,l.up)("q-card-section"),q=(0,l.up)("q-card"),f=(0,l.up)("q-linear-progress"),Z=(0,l.up)("q-inner-loading"),A=(0,l.up)("q-scroll-area"),F=(0,l.Q2)("t");return(0,l.wg)(),(0,l.j4)(A,{class:"full-height full-width"},{default:(0,l.w5)((()=>[(0,l._)("div",o,[(0,l._)("div",a,[(0,l.wy)((0,l._)("div",n,null,512),[[F,"LOGSVIEWERWEBCLIENT.HEADING_SETTINGS_TAB"]])]),(0,l.Wm)(q,{flat:"",bordered:"",class:"card-edit-settings"},{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[(0,l._)("div",g,[(0,l.Wm)(W,{dense:"",modelValue:b.enableLogging,"onUpdate:modelValue":t[0]||(t[0]=e=>b.enableLogging=e)},{default:(0,l.w5)((()=>[(0,l.wy)((0,l._)("span",null,null,512),[[F,"LOGSVIEWERWEBCLIENT.LABEL_LOGGING_ENABLE"]])])),_:1},8,["modelValue"])]),(0,l._)("div",L,[(0,l.wy)((0,l._)("div",r,null,512),[[F,"LOGSVIEWERWEBCLIENT.LABEL_LOGGING_VERBOSITY"]]),(0,l._)("div",E,[(0,l.Wm)(R,{flat:"",outlined:"",dense:"","bg-color":"white",modelValue:b.verbosity,"onUpdate:modelValue":t[1]||(t[1]=e=>b.verbosity=e),options:w.verbosityList},null,8,["modelValue","options"])])]),(0,l._)("div",m,[(0,l._)("div",null,[(0,l.Wm)(C,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",label:e.$t("LOGSVIEWERWEBCLIENT.BUTTON_LOGGING_DOWNLOAD",{SIZE:b.viewLogSizeBytes}),onClick:t[2]||(t[2]=e=>w.getLogFile(b.logFileName,!1))},null,8,["label"])]),(0,l._)("div",d,[(0,l.Wm)(C,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",label:w.viewLogText,onClick:t[3]||(t[3]=e=>w.getLog(!1))},null,8,["label"])]),(0,l._)("div",c,[(0,l.Wm)(C,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",label:e.$t("LOGSVIEWERWEBCLIENT.BUTTON_LOGGING_CLEAR"),onClick:t[4]||(t[4]=e=>w.clearLog(!1))},null,8,["label"])])]),(0,l._)("div",u,[(0,l.Wm)(W,{dense:"",modelValue:b.enableEventLogging,"onUpdate:modelValue":t[5]||(t[5]=e=>b.enableEventLogging=e)},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(B,null,null,512),[[F,"LOGSVIEWERWEBCLIENT.LABEL_LOGGING_ENABLE_EVENTS"]])])),_:1},8,["modelValue"])]),(0,l._)("div",h,[(0,l._)("div",null,[(0,l.Wm)(C,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",label:e.$t("LOGSVIEWERWEBCLIENT.BUTTON_LOGGING_DOWNLOAD_EVENTS",{SIZE:b.viewEventLogSizeBytes}),onClick:t[6]||(t[6]=e=>w.getLogFile(b.eventLogFileName,!0))},null,8,["label"])]),(0,l._)("div",v,[(0,l.Wm)(C,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",label:w.viewEventsLogText,onClick:t[7]||(t[7]=e=>w.getLog(!0))},null,8,["label"])]),(0,l._)("div",p,[(0,l.Wm)(C,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",label:e.$t("LOGSVIEWERWEBCLIENT.BUTTON_LOGGING_CLEAR"),onClick:t[8]||(t[8]=e=>w.clearLog(!0))},null,8,["label"])])]),b.users.length?((0,l.wg)(),(0,l.iD)("div",_,[(0,l._)("div",S,[(0,l._)("div",null,[(0,l.Uk)((0,i.zw)(e.$t("LOGSVIEWERWEBCLIENT.LABEL_LOGGING_USERS_WITH_SEPARATE_LOG"))+" ",1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(b.users,(t=>((0,l.wg)(),(0,l.iD)("li",{class:"q-ml-sm",style:{"list-style-type":"none"},key:t},[(0,l._)("span",{class:"logging-user__link",onClick:e=>w.getLogFile(b.logFileName,!1,t)},[(0,l.Uk)((0,i.zw)(t)+" ",1),(0,l.Wm)(y,{anchor:"top middle",self:"bottom middle",offset:[10,10]},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("LOGSVIEWERWEBCLIENT.INFO_LOGGING_CLICK_TO_DOWNLOAD")),1)])),_:1})],8,N)])))),128))])])])):(0,l.kq)("",!0),b.users.length?((0,l.wg)(),(0,l.iD)("div",I,[(0,l._)("div",null,[(0,l.Wm)(C,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",label:e.$t("LOGSVIEWERWEBCLIENT.BUTTON_LOGGING_TURN_OFF_SEPARATE_LOGS"),onClick:w.turnOffSeparateLogs},null,8,["label","onClick"])]),(0,l._)("div",T,[(0,l.Wm)(C,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",label:e.$t("LOGSVIEWERWEBCLIENT.BUTTON_LOGGING_CLEAR_SEPARATE_LOGS"),onClick:w.clearSeparateLogs},null,8,["label","onClick"])])])):(0,l.kq)("",!0)])),_:1})])),_:1}),(0,l._)("div",G,[(0,l.Wm)(C,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",onClick:w.save,label:e.$t("COREWEBCLIENT.ACTION_SAVE")},null,8,["onClick","label"])])]),(0,l.Wm)(Z,{style:{"justify-content":"flex-start"},showing:b.saving},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{query:""})])),_:1},8,["showing"])])),_:1})}var b=s(99336),w=s(41427),W=s(96390),R=s(72456),C=s(31088);const B={name:"LoggingAdminSettings",data(){return{verbosity:"",logFileData:{},logSizeBytes:0,eventLogSizeBytes:0,viewLastLogSize:0,viewLogSizeBytes:0,viewEventLogSizeBytes:0,logFileName:"",eventLogFileName:"",enableLogging:!1,enableEventLogging:!1,loggingLevel:100,users:[],timeOut:!1,saving:!1,downloadingLogs:!1,cleaningLogs:!1,viewLogs:!1,turningOffSeparateLogs:!1}},mounted(){this.populate(),this.getLogFilesData(),this.getUsersWithSeparateLog()},beforeRouteLeave(e,t,s){this.$root.doBeforeRouteLeave(e,t,s)},computed:{verbosityList(){return[{value:100,label:this.$t("LOGSVIEWERWEBCLIENT.LABEL_LOGGING_DEBUG")},{value:50,label:this.$t("LOGSVIEWERWEBCLIENT.LABEL_LOGGING_WARNINGS")},{value:20,label:this.$t("LOGSVIEWERWEBCLIENT.LABEL_LOGGING_ERRORS")}]},viewLogText(){return this.logSizeBytes<this.viewLastLogSize?this.$t("LOGSVIEWERWEBCLIENT.BUTTON_LOGGING_VIEW"):this.$t("LOGSVIEWERWEBCLIENT.BUTTON_LOGGING_VIEW_LAST",{SIZE:W.Z.getFriendlySize(this.viewLastLogSize)})},viewEventsLogText(){return this.eventLogSizeBytes<this.viewLastLogSize?this.$t("LOGSVIEWERWEBCLIENT.BUTTON_LOGGING_VIEW"):this.$t("LOGSVIEWERWEBCLIENT.BUTTON_LOGGING_VIEW_LAST",{SIZE:W.Z.getFriendlySize(this.viewLastLogSize)})}},beforeDestroy(){clearTimeout(this.timeOut)},methods:{hasChanges(){const e=C.Z.getLoggingData();return this.enableLogging!==e.enableLogging||this.enableEventLogging!==e.enableEventLogging||this.verbosity.value!==e.loggingLevel},revertChanges(){this.populate()},populate(){const e=C.Z.getLoggingData();this.enableLogging=e.enableLogging,this.enableEventLogging=e.enableEventLogging,this.viewLastLogSize=e.viewLastLogSize,this.verbosityList.forEach((t=>{t.value===e.loggingLevel&&(this.verbosity=t)}))},save(){if(!this.saving){this.saving=!0;const e={EnableLogging:this.enableLogging,EnableEventLogging:this.enableEventLogging,LoggingLevel:this.verbosity.value};R.Z.sendRequest({moduleName:"Core",methodName:"UpdateSettings",parameters:e}).then((e=>{this.saving=!1,e?(C.Z.saveLoggingData({enableLogging:this.enableLogging,enableEventLogging:this.enableEventLogging,loggingLevel:this.verbosity.value}),w.Z.showReport(this.$t("COREWEBCLIENT.REPORT_SETTINGS_UPDATE_SUCCESS"))):w.Z.showError(this.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED"))}),(e=>{this.saving=!1,w.Z.showError(b.Z.getTextFromResponse(e,this.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED")))}))}},getLogFilesData(){R.Z.sendRequest({moduleName:"LogsViewerWebclient",methodName:"GetLogFilesData"}).then((e=>{e&&(this.logSizeBytes=e.LogSizeBytes,this.eventLogSizeBytes=e.EventLogSizeBytes,this.viewLogSizeBytes=W.Z.getFriendlySize(e.LogSizeBytes),this.viewEventLogSizeBytes=W.Z.getFriendlySize(e.EventLogSizeBytes),this.logFileName=e.LogFileName,this.eventLogFileName=e.EventLogFileName),this.setUpdateStatusTimer()}))},setUpdateStatusTimer(){clearTimeout(this.timeOut),this._isDestroyed||(this.timeOut=setTimeout(this.getLogFilesData,5e3))},getUsersWithSeparateLog(){const e={};R.Z.sendRequest({moduleName:"LogsViewerWebclient",methodName:"GetUsersWithSeparateLog",parameters:e}).then((e=>{e&&(this.users=e)}),(e=>{w.Z.showError(b.Z.getTextFromResponse(e))}))},getLog(e){if(!this.viewLogs){this.viewLogs=!0;const t={EventsLog:e};R.Z.sendRequest({moduleName:"LogsViewerWebclient",methodName:"GetLog",parameters:t}).then((e=>{if(this.viewLogs=!1,e){const t=window.open("","view-log","scrollbars=1");t.document.write("<pre>"+e+"</pre>")}}),(e=>{this.viewLogs=!1,w.Z.showError(b.Z.getTextFromResponse(e))}))}},getLogFile(e,t,s=""){if(!this.downloadingLogs){this.downloadingLogs=!0;const l={EventsLog:t,PublicId:s};s&&(e=s+"-"+e),R.Z.downloadExportFile({moduleName:"LogsViewerWebclient",methodName:"GetLogFile",parameters:l,fileName:e,format:"Raw"}).then((()=>{this.downloadingLogs=!1}))}},clearLog(e){if(!this.cleaningLogs){this.cleaningLogs=!0;const t={};e&&(t.EventsLog=!0),R.Z.sendRequest({moduleName:"LogsViewerWebclient",methodName:"ClearLog",parameters:t}).then((()=>{this.cleaningLogs=!1}),(e=>{this.cleaningLogs=!1,w.Z.showError(b.Z.getTextFromResponse(e))}))}},turnOffSeparateLogs(){this.turningOffSeparateLogs||(this.turningOffSeparateLogs=!0,R.Z.sendRequest({moduleName:"LogsViewerWebclient",methodName:"TurnOffSeparateLogs"}).then((e=>{!0===e&&this.getUsersWithSeparateLog(),this.turningOffSeparateLogs=!1}),(()=>{this.turningOffSeparateLogs=!1})))},clearSeparateLogs(){this.cleaningLogs||(this.cleaningLogs=!0,R.Z.sendRequest({moduleName:"LogsViewerWebclient",methodName:"ClearSeparateLogs"}).then((e=>{this.cleaningLogs=!1,!0===e?w.Z.showReport(this.$t("COREWEBCLIENT.REPORT_SETTINGS_UPDATE_SUCCESS")):w.Z.showError(this.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED"))}),(e=>{this.cleaningLogs=!1,w.Z.showError(b.Z.getTextFromResponse(e,this.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED")))})))}}};var y=s(11639),V=s(66663),q=s(44458),f=s(63190),Z=s(96937),A=s(18401),F=s(68879),z=s(33115),U=s(46858),k=s(60854),D=s(8289),x=s(69984),$=s.n(x);const Q=(0,y.Z)(B,[["render",O],["__scopeId","data-v-32658252"]]),P=Q;$()(B,"components",{QScrollArea:V.Z,QCard:q.Z,QCardSection:f.Z,QCheckbox:Z.Z,QSelect:A.Z,QBtn:F.Z,QItemLabel:z.Z,QTooltip:U.Z,QInnerLoading:k.Z,QLinearProgress:D.Z})}}]);